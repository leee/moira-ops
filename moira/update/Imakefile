# $Header: /afs/.athena.mit.edu/astaff/project/moiradev/repository/moira/update/Imakefile,v 1.7 1992-09-22 14:18:28 mar Exp $
#
# Copyright 1990 by the Massachusetts Institute of Technology.
#
# For copying and distribution information,
# please see the file <mit-copyright.h>.
#
# Imakefile for update.
#

SRCS=	auth_001.c checksum.c client.c exec_002.c get_file.c \
	hostname.c inst_001.c log.c send_file.c ticket.c \
	update_server.c xfer_002.c xfer_003.c config.c update_test.c
SRCDIR=${SRCTOP}/update
CODE=${SRCS} Imakefile
SOBJS=	update_server.o auth_001.o inst_001.o xfer_002.o exec_002.o \
	xfer_003.o log.o get_file.o checksum.o config.o
COBJS=	ticket.o send_file.o checksum.o

#ifdef HAS_VSPRINTF
DEFINES= -DHAS_VSPRINTF
#endif

#ifdef SVRBUILD
all::	update_server moira_update.o update_test
#else
all::	update_server update_test
#endif

#ifdef SVRBUILD
moira_update.o: ${COBJS} client.o
	${LD} -r -o moira_update.o ${COBJS} client.o
#endif

program(update_server, ${SOBJS},${MR_LIBDEP} ${GDB_LIBDEP}, ${CLIBS},${ETCDIR})
test_program(update_test, ${COBJS}, ${CLIBS})
