# $Header: /afs/.athena.mit.edu/astaff/project/moiradev/repository/moira/update/Imakefile,v 1.11 1998-02-15 17:49:26 danw Exp $
#
# Copyright 1990 by the Massachusetts Institute of Technology.
#
# For copying and distribution information,
# please see the file <mit-copyright.h>.
#
# Imakefile for update.
#

SRCS=	auth_002.c checksum.c client.c config.c exec_002.c \
	get_file.c sendrecv.c send_file.c ticket.c \
	update_server.c update_test.c xfer_002.c xfer_003.c
SRCDIR=${SRCTOP}/update
CODE=${SRCS} Imakefile
SOBJS = auth_002.o checksum.o config.o exec_002.o get_file.o \
	update_server.o xfer_002.o xfer_003.o sendrecv.o
COBJS=	checksum.o client.o send_file.o ticket.o sendrecv.o

#ifdef HAS_VSPRINTF
DEFINES= -DHAS_VSPRINTF
#endif

all::	update_server update_test
#ifdef SVRBUILD
all::	moira_update.o
#endif

#ifdef SVRBUILD
moira_update.o: ${COBJS}
	${LD} -r -o moira_update.o ${COBJS}
#endif

program(update_server, ${SOBJS},${MR_LIBDEP}, ${CLIBS},${ETCDIR})
program(update_test, update_test.o ${COBJS}, ${MR_LIBDEP}, ${CLIBS},${BINDIR})
