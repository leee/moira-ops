# $Id: Makefile.in,v 1.1 1998-05-26 18:14:26 danw Exp $

SHELL=/bin/sh
@SET_MAKE@

srcdir=@srcdir@
VPATH=@srcdir@
SRCTOP=@top_srcdir@
BUILDTOP=../../..

CC=@CC@
CPPFLAGS=@CPPFLAGS@ -I$(srcdir)/../include -I$(srcdir)/crypto/bignum/h -I$(srcdir)/crypto/algorithm
CFLAGS=@CFLAGS@
ALL_CFLAGS=$(CFLAGS) $(CPPFLAGS) $(DEFS)
LDFLAGS=@LDFLAGS@
LIBS=@LIBS@
RANLIB=@RANLIB@

OBJS = gdss.o rgdss.o
COBJS = crypto/hashes.o crypto/read_password.o crypto/crypto_util.o \
	crypto/dumphex.o crypto/read_privkey.o crypto/read_pubkey.o \
	crypto/write_pubkey.o crypto/KeyFromPQ.o
BOBJS = crypto/bignum/KerN.o crypto/bignum/bnCmp.o \
	crypto/bignum/bnDivide.o crypto/bignum/bnInit.o \
	crypto/bignum/bnMult.o crypto/bignum/bz.o crypto/bignum/bzf.o 
AOBJS = crypto/algorithm/random.o crypto/algorithm/random_BigNum.o \
	crypto/algorithm/bigrsacode.o crypto/algorithm/bigkeygen.o \
	crypto/algorithm/bigsignverify.o

.c.o:
	$(CC) -c $(ALL_CFLAGS) $<

all: libgdss.a

libgdss.a: $(OBJS)
	@(cd crypto; $(MAKE) all)
	ar cru $@ $(OBJS) $(COBJS) $(BOBJS) $(AOBJS)
	$(RANLIB) $@

clean:
	rm -f $(OBJS) libgdss.a
	@(cd crypto; $(MAKE) $@)

depend:
	@(cd crypto; $(MAKE) $@)

install:
	@(cd crypto; $(MAKE) $@)
