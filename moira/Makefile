# Makefile generated by imake - do not edit!
# $XConsortium: imake.c,v 1.86 93/10/11 12:12:36 rws Exp $

#
# This makefile is automatically generated by imake... do not modify
# or you may lose your changes when imake generates makefiles again.
# Ignore this message if you are not using imake.
#
#	$Source: /afs/.athena.mit.edu/astaff/project/moiradev/repository/moira/Makefile,v $
#

NEWTOP=.
BUILDTOP=.

INCLUDE= -I$(BUILDTOP)/include -I$(BUILDTOP)/lib -I/usr/athena/include \
	$(SS_INCL)
CFLAGS=$(DBG) $(INCLUDE) $(DEFINES) $(GLOBAL_CDEFS)
LINTFLAGS=$(INCLUDE) $(DEFINES) $(GLOBAL_CDEFS)

#	$Source: /afs/.athena.mit.edu/astaff/project/moiradev/repository/moira/Makefile,v $
#

CURSES= -L/usr/css/lib -lcurses -ltermcap

OSDEFS= -DPOSIX -DSOLARIS -I/usr/openwin/include
OSLIBS= -L/usr/ccs/lib -lcurses -ltermcap -lresolv \
	-lsocket -lnsl -lc /usr/ucblib/libucb.a -lelf -ldl
CURSES=

GLOBAL_CDEFS= -DHESIOD -DZEPHYR -DGDSS -DATHENA -DDBMS=INGRES -I/usr/athena/include $(OSDEFS)

SRCTOP=/mit/moiradev/src

DESTDIR=

USRDIR= /usr
ETCDIR= /usr/athena/etc
PROGDIR=/usr/athena/bin
LIBDIR= /usr/athena/lib
LINTLIBDIR = /usr/lib/lint
INCLDIR= /usr/athena/include
MANDIR= /usr/athena/man

LZEHPYR=-lzephyr

LIBGDSS= /mit/gdss/`machtype`/libgdss.a
GDSSINC= -I/mit/gdss/include

LINTLIBFLAG=-C

MR_LIB=$(BUILDTOP)/lib/libmoira.a
MR_LIBDEP=$(MR_LIB)
MR_LINTLIB=$(BUILDTOP)/lib/llib-lmoira.ln
GDB_LIB=$(BUILDTOP)/gdb/libmrgdb.a
GDB_LIBDEP=$(GDB_LIB)
GDB_LINTLIB=$(BUILDTOP)/gdb/llib-lmrgdb.ln

COMPILE_ET= compile_et

COM_ERR = -lcom_err

MAKE_COMMANDS= mk_cmds

SS_LIB = -lss

LLIB = -L/usr/athena/lib

CLIBS= $(MR_LIB) $(GDB_LIB) $(LLIB) $(LZEPHYR) $(COM_ERR) -lkrb -ldes -lhesiod

SQL_LIB= /usr/ingres/lib/libingres.a -lm

ARCHIVE= ar cru

RANLIB= /bin/true

INSTALLFILE= install -c -m 444

INSTALLLIB= install -c -m 444

INSTALLPROG= install -c -m 555

INSTALLRAW= install

LD=ld

AS=as

LINT=lint

CC=gcc -traditional

CCRO=$(CC) -R

HCC=$(CC)

CPP=$(CC) -E

DBG=-O

HCFLAGS=$(CFLAGS)

TAGGER=etags

MAKE=make
RM=rm -f
MV=mv
CP=cp
LN=ln -s
LPR=lpr -p
CHMOD=chmod
AWK=awk

DEPEND=makedepend
IMAKE=imake -I$(BUILDTOP)/util/imake.includes

#	$Source: /afs/.athena.mit.edu/astaff/project/moiradev/repository/moira/Makefile,v $
#

# $Header: /afs/.athena.mit.edu/astaff/project/moiradev/repository/moira/Makefile,v 1.2 1997-01-29 22:55:33 danw Exp $
#
# Copyright 1990 by the Massachusetts Institute of Technology.
#
# For copying and distribution information,
# please see the file <mit-copyright.h>.
#
# Imakefile for top level directory.
#

CODE=Imakefile
CLIENTDIRS=util include gdb lib clients man update
SVRDIRS=server db backup dbck dcm gen reg_svr incremental regtape

SUBDIRS=$(CLIENTDIRS)

all::

world::
	make ${MFLAGS} Makefile
	make ${MFLAGS} Makefiles
	make ${MFLAGS} depend
	make ${MFLAGS} all

imake::
	cd util/imake; make

install::
	-mkdir ${DESTDIR}
	-mkdir ${DESTDIR}${USRDIR}
	-mkdir ${DESTDIR}${ETCDIR}
	-mkdir ${DESTDIR}${PROGDIR}
	-mkdir ${DESTDIR}${LIBDIR}
	-mkdir ${DESTDIR}${LINTLIBDIR}
	-mkdir ${DESTDIR}${INCLDIR}
	-mkdir ${DESTDIR}${MANDIR}
	-mkdir ${DESTDIR}${MANDIR}/man1
	-mkdir ${DESTDIR}${MANDIR}/man3
	-mkdir ${DESTDIR}${MANDIR}/man5
	-mkdir ${DESTDIR}${MANDIR}/man8
	-mkdir ./bin

et:
	cd util/et; make ${MFLAGS} DEPEND="$(BUILDTOP)/../../$(DEPEND)" depend; make ${MFLAGS} all

ss:
	cd util/ss; make ${MFLAGS} DEPEND="$(BUILDTOP)/../../$(DEPEND)" depend; make ${MFLAGS} all

makedepend:
	cd util/makedepend; make

all::
	@for d in  $(SUBDIRS); \
	do \
	(cd $$d; echo "### Making" all "in" `pwd`; \
	$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) all ; \
	echo "### Done with" `pwd`); \
	done

install::
	@for d in  $(SUBDIRS); \
	do \
	(cd $$d; echo "### Making" install "in" `pwd`; \
	$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) install ; \
	echo "### Done with" `pwd`); \
	done

clean::
	@for d in  $(SUBDIRS); \
	do \
	(cd $$d; echo "### Making" clean "in" `pwd`; \
	$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) clean ; \
	echo "### Done with" `pwd`); \
	done

depend::
	@for d in  $(SUBDIRS); \
	do \
	(cd $$d; echo "### Making" depend "in" `pwd`; \
	$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) depend ; \
	echo "### Done with" `pwd`); \
	done

tags::
	@for d in  $(SUBDIRS); \
	do \
	(cd $$d; echo "### Making" tags "in" `pwd`; \
	$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) tags ; \
	echo "### Done with" `pwd`); \
	done

print::
	@for d in  $(SUBDIRS); \
	do \
	(cd $$d; echo "### Making" print "in" `pwd`; \
	$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) print ; \
	echo "### Done with" `pwd`); \
	done

src::
	@for d in  $(SUBDIRS); \
	do \
	(cd $$d; echo "### Making" src "in" `pwd`; \
	$(MAKE) $(MFLAGS) DESTDIR=$(DESTDIR) src ; \
	echo "### Done with" `pwd`); \
	done

Makefiles::
	@echo "### Making Makefiles in" `pwd`
	@for d in $(SUBDIRS); \
	do \
	(cd $$d; echo "### Making Makefile in" `pwd`; \
	$(MAKE) $(MFLAGS) SRCTOP=$(SRCTOP) \
	NEWTOP=../$(BUILDTOP) \
	BUILDTOP=../$(BUILDTOP) \
	-f ../Makefile \
	Makefile; \
	$(MAKE) $(MFLAGS) SRCTOP=$(SRCTOP) \
	NEWTOP=../$(BUILDTOP) \
	Makefiles; \
	echo "### Done with" `pwd`); \
	done

depend:: $(SRCS)
	@echo "### Now computing dependencies"
	@$(DEPEND) -s "# DO NOT DELETE" -- $(CFLAGS) -- $(SRCS)

clean::
	$(RM) *~ \#* *.bak $(TAGSFILE)

tags::
	$(TAGGER) *.c *.h

Makefile::
	-$(RM) Makefile.bak; $(MV) Makefile Makefile.bak
	$(IMAKE) -DNEW_TOP=$(NEWTOP) -s Makefile

print:: ${CODE}
	${LPR} ${CODE}

src:: ${CODE}

${CODE}:
	$(RM) $@
	-$(LN) ${SRCDIR}/$@ $@

install::

Makefiles::

# DO NOT DELETE THIS LINE

