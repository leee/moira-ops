# $Id: Makefile.in,v 1.6 1998-12-16 19:42:50 danw Exp $

SHELL=/bin/sh
@SET_MAKE@

CC=@CC@
CPPFLAGS=@CPPFLAGS@
CFLAGS=@CFLAGS@
DEFS=@DEFS@
ALL_CFLAGS=$(CPPFLAGS) $(CFLAGS) $(DEFS)
PRO_C=@PRO_C@
PRO_C_DEFS=@PRO_C_DEFS@
PRO_C_INCLUDES=@PRO_C_INCLUDES@
PRO_C_OPTS=@PRO_C_OPTS@
PRO_C_FLAGS=$(PRO_C_OPTS) $(PRO_C_DEFS) $(PRO_C_INCLUDES)
LDFLAGS=@LDFLAGS@
LIBS=@SQL_LIBS@ @GDSS_LIBS@ @LIBS@
MR_LIBDEP=@MR_LIBDEP@
GDSS_LIBDEP=@GDSS_LIBDEP@
INSTALL=@INSTALL@
INSTALL_PROGRAM=@INSTALL_PROGRAM@

srcdir=@srcdir@
VPATH=@srcdir@
SRCTOP=@top_srcdir@
BUILDTOP=..
mrbindir=@mrbindir@

GDSS_OBJS=warehouse.o
OBJS=	util.o moddiff.o hesiod.o nfs.o mailhub.o pobox.o \
	hosts.o network.o directory.o ndb.o @GDSS_OBJS@

GDSS_CFILES=warehouse.c
CFILES= moddiff.c hesiod.c nfs.c mailhub.c pobox.c \
	hosts.c network.c directory.c ndb.c @GDSS_CFILES@

GDSS_TARGET=warehouse.gen
TARGET=	hesiod.gen nfs.gen mailhub.gen pobox.gen hosts.gen \
	network.gen directory.gen ndb.gen @GDSS_TARGET@

SCRIPTS=hesiod.sh mailhub.sh nfs.sh null.sh warehouse.sh

.SUFFIXES: .pc

.pc.c:
	$(PRO_C) $(PRO_C_FLAGS) INAME=$< ONAME=$@

.c.o:
	$(CC) -c $(ALL_CFLAGS) $<

all: $(TARGET)

clean:
	rm -f $(OBJS) $(CFILES) $(TARGET)

depend: $(CFILES)

install: all
	@set -x; for p in $(TARGET); do $(INSTALL_PROGRAM) $$p $(mrbindir); done
	@set -x; for p in $(SCRIPTS); do $(INSTALL) -m 755 $$p $(mrbindir); done

hesiod.gen: hesiod.o util.o moddiff.o $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) hesiod.o util.o moddiff.o $(SQL_LIBS) $(LIBS)

hosts.gen: hosts.o util.o moddiff.o $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) hosts.o util.o moddiff.o $(SQL_LIBS) $(LIBS)

nfs.gen: nfs.o util.o moddiff.o $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) nfs.o util.o moddiff.o $(SQL_LIBS) $(LIBS)

directory.gen: directory.o util.o moddiff.o $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) directory.o util.o moddiff.o $(SQL_LIBS) $(LIBS)

ndb.gen: ndb.o util.o moddiff.o $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) ndb.o util.o moddiff.o $(SQL_LIBS) $(LIBS)

mailhub.gen: mailhub.o util.o moddiff.o $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) mailhub.o util.o moddiff.o $(SQL_LIBS) $(LIBS)

pobox.gen: pobox.o util.o moddiff.o $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) pobox.o util.o moddiff.o $(SQL_LIBS) $(LIBS)

network.gen: network.o util.o moddiff.o $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) network.o util.o moddiff.o $(SQL_LIBS) $(LIBS)

warehouse.gen: warehouse.o util.o moddiff.o $(MR_LIBDEP) $(GDSS_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) warehouse.o util.o moddiff.o $(SQL_LIBS) $(GDSS_LIBS) $(LIBS)
