# $Id: Makefile.in,v 1.6 1999-07-12 16:20:56 danw Exp $

SHELL=/bin/sh
@SET_MAKE@

CC=@CC@
CPPFLAGS=@CPPFLAGS@ @CURSES_CPPFLAGS@ @GDSS_CPPFLAGS@
CFLAGS=@CFLAGS@
DEFS=@DEFS@
ALL_CFLAGS=$(CPPFLAGS) $(CFLAGS) $(DEFS)
LDFLAGS=@LDFLAGS@
LIBS=../lib/libmrclient.a @CURSES_LIBS@ @GDSS_LIBS@ @LIBS@
MR_LIBDEP=@MR_LIBDEP@
GDSS_LIBDEP=@GDSS_LIBDEP@
INSTALL=@INSTALL@
INSTALL_PROGRAM=@INSTALL_PROGRAM@

srcdir=@srcdir@
VPATH=@srcdir@
SRCTOP=@top_srcdir@
BUILDTOP=../..
prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@

MOBJS=	attach.o cluster.o delete.o globals.o lists.o main.o menu.o \
	menus.o nfs.o pobox.o quota.o user.o utils.o dcmmaint.o printer.o \
	misc.o zephyr.o
NOBJS=	namespace.o globals.o lists.o menu.o pobox.o user.o utils.o misc.o
OBJS=	${MOBJS} ${NOBJS}

TARGET=moira namespace

.c.o:
	$(CC) -c $(ALL_CFLAGS) $<

all: $(TARGET)

clean:
	rm -f $(OBJS) $(TARGET)

cleandir distclean: clean
	rm -f Makefile

depend:

install: all
	$(INSTALL_PROGRAM) namespace $(bindir)
	$(INSTALL_PROGRAM) moira $(bindir)
	ln -s $(bindir)/listmaint moira
	ln -s $(bindir)/dcmmaint moira
	ln -s $(bindir)/usermaint moira

moira: $(MOBJS) ../lib/libmrclient.a $(MR_LIBDEP) $(GDSS_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) $(MOBJS) $(LIBS)

namespace: $(NOBJS) ../lib/libmrclient.a $(MR_LIBDEP) $(GDSS_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) $(NOBJS) $(LIBS)
